function showRollover(e){var i=e.data("title"),t=e.data("desc"),o=e.data("pos"),n=e.position();if($(window).outerWidth()>=753)var a=n.left-116;else var a=0;var r=e.position().top+e.outerHeight(!0)+18;"undefined"!=typeof i&&"undefined"!=typeof t&&"undefined"!=typeof o&&($(".nutrition-rollover-title span").html(i),$(".nutrition-rollover-content p").html(t),$(".nutrition-rollover").css({left:a,top:r}),$(".nutrition-rollover").show())}$(document).ready(function(){$(".comment-link").click(function(){$("html, body").animate({scrollTop:$(".comments").offset().top-100},2e3)});var e=new ZeroClipboard($(".sharebox-copy"));e.on("copy",function(e){var i=e.clipboardData;i.setData("text/plain",""+window.location),$(e.target).html("URL Copied"),$(e.target).addClass("copied")}),internationalisation.init(),mobileExpand.init(),recipeLeftoverTip.init(),familyFoodNavigation.init(),familyFoodPromoContainer.init(),metricImperial.init(),recipeInfiniteScroll.init(),beautifulBakingCarousel.init(),inviewTracking.init(),$(window).outerWidth()<753&&mobileRecipeNav.init(),$(".nutrition-item").click(function(){$(".nutrition-rollover").hasClass("rollover-open")?($(".nutrition-rollover").hide(),$(".nutrition-rollover").removeClass("rollover-open")):($(".nutrition-rollover").addClass("rollover-open"),showRollover($(this)))}),$(".nutrition-item").hover(function(){showRollover($(this))}),$(".nutrition-list").hover(function(){},function(){$(".nutrition-rollover").hide()}),$(".print-link").click(function(){window.print()})});var recipeInfiniteScroll={perPage:12,complete:!1,init:function(){0!=$(".recipe-row.infinite-scroll").length&&($(".recipe-row.infinite-scroll .load-more a").click(recipeInfiniteScroll.loadMore),recipeInfiniteScroll.loadImages())},loadMore:function(){recipeInfiniteScroll.complete||($(".recipe-row.infinite-scroll .item").not(".active").slice(0,recipeInfiniteScroll.perPage).addClass("active"),0==$(".recipe-row.infinite-scroll .item").not(".active").length&&($(".recipe-row.infinite-scroll .load-more").hide(),recipeInfiniteScroll.complete=!0),recipeInfiniteScroll.loadImages(),stickyAds.onScroll())},loadImages:function(){$(".recipe-row.infinite-scroll .item.active img[data-src]").each(function(){$(this).attr("src",$(this).data("src")),$(this).removeData("src")})}},metricImperial={init:function(){$(".imperial-switch a").click(function(){$("#recipe-single").toggleClass("imperial-switched")})}},internationalisation={init:function(){var e=$("body").attr("class");internationalisation.setCountry(e)},setCountry:function(e){e=e.toLowerCase(),"gb"==e&&(e="uk");var i='.recipe-versions li[data-countrycode="'+e+'"]';$(i).length>0&&!$(i).hasClass("current-lang")&&internationalisation.suggestVersion($(i),e)},suggestVersion:function(e,i){if("1"!==$.cookie("language-version-suggest-dismiss")){var t=e.position().left+(e.width()-20)/2;$("#language-version-suggest").css("left",t+"px"),$("#language-version-suggest ."+i).addClass("active"),$("#language-version-suggest").addClass("active effect-8"),$("#language-version-suggest a.close").click(function(){$("#language-version-suggest").fadeOut(),$.cookie("language-version-suggest-dismiss","1",{expires:5,path:"/"})})}}},recipeLeftoverTip={init:function(){$(".leftover").hover(function(){var e=$(this).data("tip"),i=$(this).position(),t=i.top+$(this).outerHeight(!0);$(".tip-wrapper").css({top:t+20,left:i.left}),$(".tip-content").html(e),$(".tip-wrapper").show()},function(){$(".tip-wrapper").hide(),$(".tip-content").empty()}),$(".leftover").click(function(e){if(e.preventDefault(),"block"==$(".tip-wrapper").css("display"))$(".tip-wrapper").hide(),$(".tip-content").empty();else{var i=$(this).data("tip"),t=$(this).position(),o=t.top+$(this).outerHeight(!0);$(".tip-wrapper").css({top:o+20,left:t.left}),$(".tip-content").html(i),$(".tip-wrapper").show()}})}},mobileRecipeNav={ingred_top:!1,ingred_bottom:!1,prompt_top:!1,init:function(){0!=$(".recipe-method-nav").length&&($(window).on("load resize",function(){mobileRecipeNav.measureIngredientPositions(),mobileRecipeNav.setNavPos()}),$(window).scroll(function(){mobileRecipeNav.setNavPos()}),$(".recipe-method-nav, .method-mobile-prompt").click(function(){$("html, body").css({overflow:"hidden"}),$(".recipe-method-nav").addClass("method-open"),$(".recipe-instructions").show(),$(".recipe-instructions").addClass("expanded"),$(".recipe-ingred-nav").addClass("active")}),$(".recipe-ingred-nav").click(function(){$("html, body").css({overflow:""}),$(".recipe-instructions").hide(),$(".recipe-ingred-nav").removeClass("active"),$(".recipe-instructions").removeClass("expanded"),$(".recipe-method-nav").removeClass("method-open")}))},measureIngredientPositions:function(){mobileRecipeNav.ingred_top=$(".recipe-ingredients").offset().top,mobileRecipeNav.ingred_bottom=$(".recipe-ingredients").offset().bottom,mobileRecipeNav.prompt_top=$(".method-mobile-prompt-wrapper").offset().top},setNavPos:function(){var e=$(window).scrollTop();mobileRecipeNav.ingred_top&&mobileRecipeNav.prompt_top||mobileRecipeNav.measureIngredientPositions(),e>=mobileRecipeNav.ingred_top-100&&e<=mobileRecipeNav.prompt_top-230?0==$(".recipe-instructions").hasClass("expanded")&&($(".recipe-method-nav").addClass("active"),$(".recipe-method-nav").removeClass("at-end")):e<=mobileRecipeNav.ingred_top-100?0==$(".recipe-instructions").hasClass("expanded")&&($(".recipe-method-nav").removeClass("no-transition"),$(".recipe-method-nav").removeClass("active")):e>=mobileRecipeNav.prompt_top-230&&0==$(".recipe-instructions").hasClass("expanded")&&($(".recipe-method-nav").addClass("no-transition"),$(".recipe-method-nav").addClass("at-end"))}},mobileExpand={init:function(){$(".section-expand").click(function(){var e=$(this).data("target");$(this).hasClass("expanded")?($(e).hide(),$(this).removeClass("expanded")):($(e).show(),$(this).addClass("expanded"))})}},familyFoodPromoContainer={init:function(){var e=$(".family-food-promo-container"),i=jo.getParameterByName("family-food-category"),t=$("h1").first().text();i&&""!==i&&familyFoodPromoContainer.getFamilyFoodNavigation(t,i,function(i){var o=$(i).find(".category-link.active");o.length>0&&familyFoodPromoContainer.getCategory(o,function(o){var n=$(o).find(".recipe-content-item:contains('"+t+"')").nextAll(".recipe-content-item").first().find(".link");0===n.length&&(n=$(o).find(".recipe-content-item").first().find(".link")),e.html(i),e.find(".recipe-link-text").text(n.find(".title").text()),e.find(".recipe-link").attr("href",n.attr("href")),e.addClass("visible"),$(".family-food-broadcasting-strip").addClass("hidden")})})},getFamilyFoodNavigation:function(e,i,t){$.ajax({type:"post",dataType:"html",url:ajaxURL,data:{action:"get_family_food_navigation",category_id:i,recipe_title:e,current_recipe_url:window.location.href},success:t})},getCategory:function(e,i){$.ajax({type:"get",dataType:"html",url:e.attr("href"),success:i})}},familyFoodNavigation={init:function(){$(".family-food-promo-container").on("click",".current-category",function(e){var i=$(e.currentTarget);i.toggleClass("selected"),$(".family-food-category-navigation").toggleClass("open")})}},familyFoodPromo={init:function(){var e=$(".family-food-promo"),i=$.cookie("jo-hide-family-food-promo");"true"!==i&&e.removeClass("closed"),e.find(".close-link").click(function(i){i.preventDefault(),e.addClass("closed"),$.cookie("jo-hide-family-food-promo",!0)})}},beautifulBakingCarousel={activeVideo:null,init:function(){this.setupCarousel(),this.playVideoOnClick()},setupCarousel:function(){$(".videos-carousel").slick({infinite:!0,autoplay:!1,speed:400,dots:!0,arrows:!0,centerMode:!0,slidesToShow:3,responsive:[{breakpoint:992,settings:{slidesToShow:1}}]}),$(".videos-carousel").on("afterChange",function(e,i,t){beautifulBakingCarousel.stopVideos(),beautifulBakingCarousel.playVideoOnClick()})},selectSlide:function(e){var i=$('[data-slick-index="'+e+'"]').children("a.thumbnail");i.on("click",function(i){$(".videos-carousel").slick("slickGoTo",e)})},stopVideos:function(){$(".videos-carousel").find("iframe").remove(),$(".videos-carousel li a").each(function(e,i){$(this).hasClass("video-playing")&&$(this).removeClass("video-playing")})},playVideoOnClick:function(){$(".slick-center.slick-active.slick-current > a.thumbnail").on("click",function(e){e.preventDefault(),null!==beautifulBakingCarousel.activeVideo&&(beautifulBakingCarousel.activeVideo.parents("a").removeClass("video-playing"),beautifulBakingCarousel.activeVideo.remove());var i=$(this).data("video");$(this).addClass("video-playing");var t=$(this).append('<iframe class="youtube active" src="https://www.youtube.com/embed/'+i+'?autoplay=1" frameborder="0" allowfullscreen></iframe>');beautifulBakingCarousel.activeVideo=t.children("iframe").first()})}};